<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Blockly Demo: Generating JavaScript</title>
    <script src="./node_modules/blockly/blockly_compressed.js"></script>
    <script src="./node_modules/blockly/blocks_compressed.js"></script>
    <script src="./node_modules/blockly/javascript_compressed.js"></script>
    <script src="./node_modules/blockly/msg/en.js"></script>
    <script src="blocks.js"></script>
    <script src="blocks-gen.js"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            background-color: #fff;
            font-family: sans-serif;
        }

        h1 {
            font-weight: normal;
            font-size: 140%;
        }

        #table {
            height: 100%;
            width: 100%;
        }

        img {
            display: block;
        }

        table,
        tr,
        td,
        img {
            margin: 0;
            padding: 0;
            border: none;
            border-collapse: collapse;
        }

        #field td {
            position: relative;
        }

        #field img {
            position: absolute;
            top: 0;
            left: 0;
            height: 50px;
            width: 50px;
        }

        #field img:first-child {
            position: relative;
        }
    </style>
</head>

<body>
<table id="table">
    <tr>
        <td>
            <h2>DSMJ assignment 7.1</h2>
        </td>
    </tr>
    <tr>
        <td style="padding: 10px;">
            <button onclick="exportCode()">Import</button>
            <button onclick="importCode()">Export</button>
            <input id="textinput" type="text"/>
            <button onclick="startAgain()">New game</button>
        </td>
        <td style="padding: 20px;">
            <button onclick="showCode()">Show code</button>
            <button onclick="runCode()">Start program</button>
        </td>
    </tr>
    <tr>
        <td width="50%" height="100%">
            <div id="blocklyDiv" style="height: 100%; width: 100%;"></div>
        </td>
        <td style="padding: 20px;position: relative;">
            <div class="left">
                <table id="field"></table>
            </div>
        </td>
    </tr>
</table>

<script>
    var toolbox = {
        "kind": "categoryToolbox",
        "contents": [
            {
                "kind": "category",
                "name": "Program",
                "categorystyle": "logic_category",
                "contents": [
                    {"kind": "block", "type": "program"}
                ]
            },
            {
                "kind": "category",
                "name": "Actions",
                "colour": 160,
                "contents": [
                    {"kind": "block", "type": "moveRight"},
                    {"kind": "block", "type": "moveLeft"},
                    {"kind": "block", "type": "moveUp"},
                    {"kind": "block", "type": "moveDown"},
                    {"kind": "block", "type": "pickup"}
                ]
            },
            {
                "kind": "category",
                "name": "Logic",
                "colour": 210,
                "contents": [
                    {"kind": "block", "type": "controls_if"},
                    {"kind": "block", "type": "controls_whileUntil"},
                    {"kind": "block", "type": "controls_repeat_ext"}
                ]
            },
            {
                "kind": "category",
                "name": "Variables & Conditions",
                "colour": 230,
                "contents": [
                    {"kind": "block", "type": "variables_set"},
                    {"kind": "block", "type": "variables_get"},
                    {"kind": "block", "type": "math_number", "fields": {"NUM": 123}},
                    {"kind": "block", "type": "isPresent"},
                    {"kind": "block", "type": "isNotAPresent"}
                ]
            }
        ]
    };


    var demoWorkspace = Blockly.inject('blocklyDiv', {
        media: './node_modules/blockly/media/',
        toolbox: toolbox,
    });

    var startBlocks = {
        blocks: {
            languageVersion: 0,
            blocks: [
                {
                    type: 'program',
                },
            ]
        },
    };
    Blockly.serialization.workspaces.load(startBlocks, demoWorkspace);
</script>

<script src="workspace.js"></script>
</body>
</html>
