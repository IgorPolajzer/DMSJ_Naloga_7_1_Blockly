<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Blockly Demo: Generating JavaScript</title>
    <script src="./node_modules/blockly/blockly_compressed.js"></script>
    <script src="./node_modules/blockly/blocks_compressed.js"></script>
    <script src="./node_modules/blockly/javascript_compressed.js"></script>
    <script src="./node_modules/blockly/msg/en.js"></script>
    <script src="movements.js"></script>
    <script src="movements-gen.js"></script>
    <style>
        html,
        body {
            height: 100%;
            margin: 0;
        }

        body {
            background-color: #fff;
            font-family: sans-serif;
        }

        h1 {
            font-weight: normal;
            font-size: 140%;
        }

        #table {
            height: 100%;
            width: 100%;
        }

        #blocklyArea {
            height: 99%;
        }

        img {
            display: block;
        }

        table,
        tr,
        td,
        img {
            margin: 0;
            padding: 0;
            border: none;
            border-collapse: collapse;
        }

        .center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #field td {
            position: relative;
        }

        #field img {
            position: absolute;
            top: 0;
            left: 0;
            height: 50px;
            width: 50px;
        }

        #field img:first-child {
            position: relative;
        }
    </style>
</head>

<body>
<table id="table">
    <tr>
        <td>
            <h2>DSMJ naloga 7.1</h2>
        </td>
    </tr>
    <tr>
        <td style="padding: 10px;">
            <button onclick="exportCode()">Izvozi</button>
            <button onclick="importCode()">Uvozi</button>
            <input id="textinput" type="text"/>
            <button onclick="startAgain()">Ponovi</button>
        </td>
        <td style="padding: 20px;">
            <button onclick="showCode()">Koda</button>
            <button onclick="runCode()">Start</button>
        </td>
    </tr>
    <tr>
        <td width="50%" height="100%">
            <div id="blocklyDiv" style="height: 100%; width: 100%;"></div>
        </td>
        <td style="padding: 20px;position: relative;">
            <div class="left">
                <table id="field"></table>
            </div>
        </td>
    </tr>
</table>


<script>
    var toolbox = {
        kind: 'categoryToolbox',
        contents: [
            {
                kind: 'category',
                name: 'Movements',
                categorystyle: 'logic_category',
                contents: [
                    {
                        kind: 'block',
                        type: 'moveRight',
                    },
                    {
                        kind: 'block',
                        type: 'moveLeft',
                    },
                    {
                        kind: 'block',
                        type: 'moveUp',
                    },
                    {
                        kind: 'block',
                        type: 'moveDown',
                    }
                ],
            },
            {
                kind: 'category',
                name: 'Logic',
                categorystyle: 'loop_category',
                contents: [
                    {
                        kind: 'block',
                        type: 'program'
                    },
                    {
                        kind: 'block',
                        type: 'controls_repeat_ext',
                        inputs: {
                            TIMES: {
                                block: {
                                    type: 'math_number',
                                    fields: {
                                        NUM: 10,
                                    },
                                },
                            },
                        },
                    },
                    {
                        kind: 'block',
                        type: 'controls_whileUntil',
                    },
                    {
                        kind: 'block',
                        type: 'controls_if',
                    },
                    {
                        kind: 'block',
                        type: 'math_number',
                        fields: {
                            NUM: 123,
                        },
                    }
                ],
            }
        ],
    };

    var demoWorkspace = Blockly.inject('blocklyDiv', {
        media: './node_modules/blockly/media/',
        toolbox: toolbox,
    });

    var startBlocks = {
        blocks: {
            languageVersion: 0,
            blocks: [
                {
                    type: 'program',
                },
            ]
        },
    };
    Blockly.serialization.workspaces.load(startBlocks, demoWorkspace);
</script>

<script src="workspace.js"></script>
</body>
</html>
